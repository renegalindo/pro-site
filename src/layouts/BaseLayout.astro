---
import { ViewTransitions } from 'astro:transitions';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';

interface Props {
  title: string;
  description?: string;
  hideHeader?: boolean;
  hideFooter?: boolean;
  backLink?: {
    href: string;
    label: string;
  };
  nextLink?: {
    href: string;
    label: string;
  };
}

const {
  title,
  description = 'René Galindo',
  hideHeader = false,
  hideFooter = false,
  backLink,
  nextLink,
} = Astro.props;

const fullTitle = title === 'René Galindo' ? title : `${title} | René Galindo`;
---

<!doctype html>
<html lang="en" class="scrollbar-gutter-stable">
  <head>
    <style is:global>
      .scrollbar-gutter-stable {
        scrollbar-gutter: stable;
      }
      /* Firefox */
      html {
        scrollbar-width: thin;
        scrollbar-color: #d1d5db transparent;
      }
      /* WebKit (Chrome, Safari, Edge) */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #d1d5db;
        border-radius: 4px;
      }
      /* GT America Font */
      @font-face {
        font-family: 'GT America';
        src: url('/fonts/GT-America-Standard-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'GT America';
        src: url('/fonts/GT-America-Standard-Medium.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }
      /* Minimal link style */
      main a {
        color: inherit;
        text-decoration: underline dotted;
        text-decoration-color: currentColor;
        text-underline-offset: 3px;
        transition: color 0.15s ease, text-decoration-color 0.15s ease;
      }
      main a:hover {
        color: #6b7280;
        text-decoration-color: #6b7280;
      }
      main a:active {
        color: #4b5563;
        text-decoration-color: #4b5563;
      }
      /* Instant page transitions */
      ::view-transition-old(root),
      ::view-transition-new(root) {
        animation: none;
      }
      /* Base font family */
      body {
        font-family: 'GT America', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      }
    </style>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <title>{fullTitle}</title>
    <meta name="description" content={description} />
    <ViewTransitions />
  </head>
  <body class="bg-gray-50 text-gray-900 antialiased">
    <div class="min-h-screen flex flex-col">
      <Header hidden={hideHeader} transition:persist />
      <main class="flex-1 w-full max-w-2xl mx-auto px-4 pt-4 sm:pt-6 pb-24 text-lg">
        <slot />
      </main>
      {!hideFooter && <Footer backLink={backLink} nextLink={nextLink} transition:persist />}
    </div>
  </body>
</html>
