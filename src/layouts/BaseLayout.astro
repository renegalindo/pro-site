---
import { ViewTransitions } from 'astro:transitions';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';

interface Props {
  title: string;
  description?: string;
  hideFooter?: boolean;
}

const {
  title,
  description = 'René Galindo',
  hideFooter = false,
} = Astro.props;

const fullTitle = title === 'René Galindo' ? title : `${title} | René Galindo`;
const pageTitle = title === 'René Galindo' ? undefined : title;
---

<!doctype html>
<html lang="en" class="scrollbar-gutter-stable">
  <head>
    <style is:global>
      .scrollbar-gutter-stable {
        scrollbar-gutter: stable;
      }
      /* Firefox */
      html {
        scrollbar-width: thin;
        scrollbar-color: #d1d5db transparent;
      }
      /* WebKit (Chrome, Safari, Edge) */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #d1d5db;
        border-radius: 4px;
      }
      /* GT America Font */
      @font-face {
        font-family: 'GT America';
        src: url('/fonts/GT-America-Standard-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'GT America';
        src: url('/fonts/GT-America-Standard-Medium.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }
      /* Minimal link style */
      main a {
        color: inherit;
        text-decoration: underline dotted;
        text-decoration-color: currentColor;
        text-underline-offset: 3px;
        transition: color 0.15s ease, text-decoration-color 0.15s ease;
      }
      main a:hover {
        color: #6b7280;
        text-decoration-color: #6b7280;
      }
      main a:active {
        color: #4b5563;
        text-decoration-color: #4b5563;
      }
      /* Old content disappears instantly, new content fades in */
      ::view-transition-old(main) {
        animation-duration: 0s;
      }
      ::view-transition-new(main) {
        animation-duration: 0.75s;
      }
      /* Page title: old fades out with menu items, new fades in with content */
      ::view-transition-old(page-title) {
        animation-duration: 0.15s; /* Matches dropdown menu fade-out */
      }
      ::view-transition-new(page-title) {
        animation-duration: 0.75s; /* Matches content fade-in */
      }
    </style>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <title>{fullTitle}</title>
    <meta name="description" content={description} />
    <ViewTransitions />
  </head>
  <body class="bg-gray-50 text-gray-900 antialiased" style="font-family: 'GT America', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;">
    <div class="min-h-screen flex flex-col">
      <Header pageTitle={pageTitle} transition:name="header" transition:persist />
      <main class="flex-1 w-full max-w-2xl mx-auto px-4 py-8 sm:py-12 pb-24 text-lg" transition:name="main" transition:animate="fade">
        <slot />
      </main>
      {!hideFooter && <Footer transition:name="footer" transition:persist />}
    </div>
  </body>
</html>
