---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const work = await getCollection('work');
const sortedWork = work.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Work" description="Selected work by René Galindo">
  <div class="space-y-8">
    <h1 class="text-2xl font-medium">Work</h1>

    <p class="text-gray-700">
      Selected projects and case studies.
    </p>

    <div class="space-y-6">
      {sortedWork.map((project) => (
        <a href={`/work/${project.slug}`} class="block group">
          <article class="py-4 border-b border-gray-100">
            <h2 class="font-medium group-hover:text-gray-600 transition-colors">
              {project.data.title}
            </h2>
            <p class="text-sm text-gray-500 mt-1">
              {project.data.company && <span>{project.data.company}</span>}
              {project.data.company && project.data.year && <span> · </span>}
              {project.data.year && <span>{project.data.year}</span>}
            </p>
            <p class="text-gray-700 mt-2">
              {project.data.description}
            </p>
          </article>
        </a>
      ))}
    </div>

    {sortedWork.length === 0 && (
      <p class="text-gray-500 italic">Case studies coming soon.</p>
    )}
  </div>
</BaseLayout>
