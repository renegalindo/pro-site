---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const work = await getCollection('work');
  return work.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<BaseLayout title={project.data.title} description={project.data.description}>
  <article class="space-y-8">
    <header>
      <h1 class="text-2xl font-medium">{project.data.title}</h1>
      <p class="text-gray-500 mt-2">
        {project.data.company && <span>{project.data.company}</span>}
        {project.data.company && project.data.role && <span> · </span>}
        {project.data.role && <span>{project.data.role}</span>}
        {(project.data.company || project.data.role) && project.data.year && <span> · </span>}
        {project.data.year && <span>{project.data.year}</span>}
      </p>
    </header>

    <div class="prose prose-gray max-w-none">
      <Content />
    </div>

    <div class="pt-4 border-t border-gray-100">
      <a href="/work" class="text-sm text-gray-500 hover:text-gray-700 transition-colors">
        ← Back to work
      </a>
    </div>
  </article>
</BaseLayout>

<style>
  .prose {
    @apply text-gray-700 leading-relaxed;
  }
  .prose h2 {
    @apply text-xl font-medium text-gray-900 mt-8 mb-4;
  }
  .prose h3 {
    @apply text-lg font-medium text-gray-900 mt-6 mb-3;
  }
  .prose p {
    @apply mb-4;
  }
  .prose ul {
    @apply list-disc pl-6 mb-4;
  }
  .prose li {
    @apply mb-2;
  }
  .prose a {
    @apply underline hover:text-gray-600;
  }
</style>
